!function(e,n){var t=window.jQuery||{},o=n,i=window.document,r=n;e.loginBox=e.loginBox?e.loginBox:{},t===window.jQuery?($selectorAll=function(e){var n=[];return t(e).each(function(e,t){n.push(t)}),n},function(e){return t(e).get(0)},o=!0):$selectorAll=function(e){return document.querySelectorAll(e)},t.LOGIN=t.LOGIN||{},t.LOGIN.isInit=!0,e.loginBox.scope=t.LOGIN;var a=function(e){var n=document.cookie;return n&&function(){var t,o={};n=n.split("; ");for(var i=0,r=n.length;i<r&&(t=n[i].split("="),!(t.length>0&&(t[0]===e&&(o.key=t[0],o.value=t[1],o.status=!0),"key"in o)));i++);return"key"in o&&o}()},c=function(e,n,t){var o,i,r=a(e);r&&!0===r.status&&(o=r.key+"="+r.value+";",i=new Date,i.setTime(i.getTime()-1e3),o=o+"expires="+i.toGMTString()+";",n&&(o=o+"domain="+n+";"),t&&(o=o+"path="+t+";"),document.cookie=o)},s=function(){a("c-login-auto").status&&c("c-login-auto",".csdn.net","/"),delete t.LOGIN.options.pvSource},l=function(){var e=i.head,n=e.firstElementChild||e.firstChild,t=document.createElement("style");t.innerText=".login-box{position: fixed;display: none;left: 50%;top: 50%;z-index: 10000;-webkit-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-o-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);transform: translate(-50%, -50%);background-color: #fff;}.login-mark{position: fixed;top: 0;left: 0;z-index: 9999;background-color: rgba(0, 0, 0, 0.5);width: 100%;height: 100%;display: none;}",e.insertBefore(t,n)},u=function(e){e&&e.pvSource&&(t.LOGIN.options.pvSource=e.pvSource,f(t.LOGIN.options)),t.LOGIN.docDom&&(i.body.appendChild(t.LOGIN.oMark),i.body.appendChild(t.LOGIN.docDom),t.LOGIN.appendBox.isCreate=!0)},d=function(e){var n,o,a,c=e.domain,s=e.from,l=e.append,u=e.isClosedBtn,d=e.service,f=e.isRedirect,p=e.loginService,m=e.isIframe,L=e.iframeName,I=e.frameWidth,N=e.frameHeight,O=document.createElement("div");return O.className="login-mark",i.domain=c||"csdn.net",s&&(p=p+"?from="+s,d&&(p=p+"&service="+d),a=p,e.pvSource&&(p=p+"&"+e.pvSource)),console.debug("处理service:",p),r=document.createDocumentFragment(),n='<iframe  width="'+I+'" height="'+N+'" name="'+L+'" src="'+p+'" frameborder="0" scrolling="no"></iframe>',o=document.createElement("div"),o.id=l.replace(/[#\.]/,""),o.className="login-box",t.LOGIN.appendBox=o,t.LOGIN.markDom=O,t.LOGIN.recordLoginService=a,t.LOGIN.loginService=p,m&&(t.LOGIN.appendBox.innerHTML=n,t.LOGIN.iframeName=L,t.LOGIN.iframeDom=t.LOGIN.appendBox.firstElementChild||t.LOGIN.appendBox.firstChild),u&&(cssStyle="display: inline-block; color: #999; font-size: 22px; cursor: pointer; position:absolute; top:2%; right:5%;-moz-user-select:none; -webkit-user-select:none; user-select:none;",closeBtn=document.createElement("span"),closeBtn.style=cssStyle,closeBtn.innerHTML="&times",o.appendChild(closeBtn),t.LOGIN.closeBtn=closeBtn),r&&(r.appendChild(o),t.LOGIN.oMark=O,t.LOGIN.docDom=r),t.LOGIN.isRedirect=f,!0},f=e.loginBox.login=function(o){o=o||{};var i={domain:o.domain||"csdn.net",isRedirect:o.isRedirect||!document.createElement("iframe").sandbox,iframeName:o.iframeName||"passport_iframe",isIframe:o.isIframe===n||o.isIframe,frameWidth:o.frameWidth,frameHeight:o.frameHeight,append:o.append||"#passport-box",isClosedBtn:void 0==o.isClosedBtn||!!o.isClosedBtn,from:o.from,service:o.service,loginService:o.loginService,initRun:o.initRun||null,before:o.before||null,after:o.after||null,finished:o.finished||null};if(o.pvSource&&(i.pvSource=o.pvSource),!i.loginService)throw new Error("login 处理 control错误！");return t.LOGIN.options=i,t.LOGIN.runStatus=!0,i.isIframe&&function(){i.initRun&&(t.LOGIN.runStatus=i.initRun()),t.LOGIN.runStatus&&(t.LOGIN.runStatus=d(i))}(),e.loginBox},p=function(e){return t.LOGIN.runStatus=t.LOGIN.options[e]?t.LOGIN.options[e]():t.LOGIN.runStatus,t.LOGIN.runStatus},m=function(e,n,t){window.addEventListener?function(){e.addEventListener(n,t,!1)}():function(){e.attachEvent("on"+n,t)}()},L=function(e,n){var o;if(o="all"===e?"none":"block","start"===e&&(o="block"),!t.LOGIN.options.pvSource&&"block"===o){var i;t.LOGIN.loginService!==t.LOGIN.recordLoginService&&(i=t.LOGIN.appendBox.getElementsByTagName("iframe"),i[0].src=t.LOGIN.recordLoginService,t.LOGIN.loginService=t.LOGIN.recordLoginService)}return t.LOGIN.appendBox&&(t.LOGIN.markDom.style.display=o,t.LOGIN.appendBox.style.display=o,t.LOGIN.appendBox.status="block"===o||(t.LOGIN.runStatus=!0,!1)),t.LOGIN.appendBox.status&&n&&n(),t.LOGIN},I=function(){var e=function(e){var n=window.event||e;if(t.LOGIN.appendBox.status)return L("all"),n.cancelBubble?n.cancelBubble=!0:n.stopPropagation(),!1};t.LOGIN.oMark&&!t.LOGIN.oMark.isClick&&(m(t.LOGIN.oMark,"click",e),t.LOGIN.oMark.isClick=!0),t.LOGIN.closeBtn&&t.LOGIN.oMark.isClick&&!t.LOGIN.closeBtn.isCloseClick&&(m(t.LOGIN.closeBtn,"click",e),t.LOGIN.closeBtn.isCloseClick=!0)},N=function(){t.LOGIN.loginBtn=$selectorAll("[data-bind-login=true]");var e=function(e){var o=window.event||e,r="true"===this.getAttribute("data-bind-login"),a=this.href;if(!t.LOGIN.runStatus&&r)return console.error("开启loginbox失败!"),!1;!1===t.LOGIN.isRedirect?!0===r&&(t.LOGIN.options.isIframe&&(s(),!t.LOGIN.appendBox.isCreate&&u(),p("before")&&L(n,function(){p("after")}),I()),o.cancelBubble?o.cancelBubble=!0:o.stopPropagation(),o.returnValue?o.returnValue=!1:o.preventDefault()):a||(i.location.href=t.LOGIN.options.loginService)},o=0;if(!t.LOGIN.loginBtn||t.LOGIN.loginBtn.length<=0)return!1;for(;t.LOGIN.loginBtn[o];)!function(n){var o=t.LOGIN.loginBtn[n];m(o,"click",e)}(o),o++},O=function(){f({domain:"csdn.net",isIframe:!0,frameWidth:410,frameHeight:427,append:"#passportbox",from:window.location.href,loginService:"https://passport.csdn.net/account/login"})};e.loginBox.close=function(){return t.LOGIN.appendBox.status&&L("all"),e.loginBox},e.loginBox.show=function(n){return!t.LOGIN.appendBox.isCreate&&u(n),t.LOGIN.appendBox.status||(L("start"),I()),e.loginBox};var G,g=(e.loginBox.support=function(){return t.LOGIN.isRedirect},function(){l(),N(),t.LOGIN.isInit&&O()}),v=function(e){var n=!1,t=function(){n||(n=!0,e&&e())},o=function(){try{i.documentElement.doScroll("left")}catch(e){return void setTimeout(o,50)}t()};o(),i.onreadystatechange=function(){"complete"===i.readyState&&(i.onreadystatechange=null,t())}},B=function(e){document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(function(){e&&e()},0):(G=function(){document.removeEventListener("DOMContentLoaded",G,!1),e()},document.addEventListener("DOMContentLoaded",G,!1)):document.attachEvent&&v(e)};_ready=function(){o&&t(function(){g()})||B(g)},_ready()}(window.csdn=window.csdn||{},void 0);